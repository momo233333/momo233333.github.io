---
layout: post
title:  "Splunk学习日记"
categories: Splunk
tags:  splunk  
author: momo
---

* content
{:toc}


## 前言

关于Splunk使用过程中的一些常用查询功能。

###  一、获取时间
1、获取当前时间

| eval timestamp=strftime(now(),"%Y-%m-%d %H:%M:%S")

2、30分钟前的时间归为当前小时，30分钟后的归到下一个小时

| eval timestamp=if(strftime(now(),"%M")>="30",strftime(relative_time(now(),"+1h@h"),"%Y-%m-%d %H")+":00:00",strftime(now(),"%Y-%m-%d %H")+":00:00")

### 二、查询本地上传的csv文件
1、inputlookup语法用于查询上传后的csv文件表的内容
```
| inputlookup myTest.csv
```

2、outputlookup可以将查询到的数据插入相应的csv文件,插入的字段必须与表中的字段相对应
```
index = "test_data" source="nginx.log"
| table v1,v2
| outputlookup myTest.csv append=true(将搜索结果附加到现有.csv文件中，否则将会创建一个文件)
```







